<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bill Splitter - Embed</title>
  <meta name="robots" content="noindex, nofollow">
  <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <style>
    body {
      background: #fff;
      padding: 1rem;
      min-height: auto;
    }
    .embed-container {
      max-width: 100%;
    }
    .embed-header {
      text-align: center;
      margin-bottom: 1rem;
    }
    .embed-header h1 {
      font-size: 1.125rem;
      margin: 0 0 0.25rem 0;
    }
    .embed-header p {
      font-size: 0.8125rem;
      color: #6b7280;
      margin: 0;
    }
    .embed-footer {
      text-align: center;
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
      font-size: 0.75rem;
      color: #6b7280;
    }
    .embed-footer a {
      color: #F54900;
    }
    .tabs {
      max-width: 100%;
      justify-content: center;
    }
    .callout {
      display: none;
    }
    .scenario-selector {
      justify-content: center;
    }
  </style>
</head>
<body>
  <div class="embed-container">
    <div class="embed-header">
      <h1>Bill Splitter</h1>
      <p>Split expenses fairly between friends</p>
    </div>

    <!-- Tab Controls -->
    <div class="tabs" role="tablist">
      <button class="tab active" role="tab" aria-selected="true" aria-controls="even-split-panel" id="even-split-tab" data-tab="even-split">
        Even Bill Split
      </button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="group-expenses-panel" id="group-expenses-tab" data-tab="group-expenses">
        Fair Bill Split (Scenarios)
      </button>
    </div>

    <!-- Even Bill Split Panel -->
    <div class="tab-panel active" role="tabpanel" id="even-split-panel" aria-labelledby="even-split-tab">
      <div class="calculator-layout">
        <div class="form-section">
          <div class="form-group">
            <label for="bill-total">Bill Total</label>
            <input type="number" id="bill-total" min="0" step="0.01" placeholder="0.00" inputmode="decimal">
            <span class="error-msg" id="bill-total-error"></span>
          </div>
          <div class="form-group">
            <label for="num-people">Total Number of People</label>
            <input type="number" id="num-people" min="1" step="1" placeholder="0" inputmode="numeric">
            <span class="error-msg" id="num-people-error"></span>
          </div>
        </div>
        <div class="result-box" id="even-result" aria-live="polite">
          <span class="result-label">Result</span>
          <div class="result-main">
            <span class="result-value" id="even-result-value">$0.00</span>
            <span class="result-unit">per person</span>
          </div>
          <div class="result-meta" id="even-result-meta"></div>
          <div class="result-actions">
            <button class="btn-copy" id="copy-even-result" aria-label="Copy result">Copy</button>
            <button class="btn-reset" id="reset-even-split" aria-label="Reset calculator">Reset</button>
          </div>
          <div class="result-note">
            Even split calculation divides the total equally among all people.
          </div>
        </div>
      </div>
    </div>

    <!-- Fair Split (Scenarios) Panel -->
    <div class="tab-panel" role="tabpanel" id="group-expenses-panel" aria-labelledby="group-expenses-tab">

      <!-- Scenario Selector -->
      <div class="scenario-selector" role="tablist" aria-label="Choose scenario type">
        <button class="scenario-tab active" role="tab" aria-selected="true" data-scenario="restaurant" id="scenario-restaurant-tab">
          Restaurant Bill
        </button>
        <button class="scenario-tab" role="tab" aria-selected="false" data-scenario="group-expense" id="scenario-group-expense-tab">
          Group Expense
        </button>
        <button class="scenario-tab" role="tab" aria-selected="false" data-scenario="trip" id="scenario-trip-tab">
          Trip / Vacation
        </button>
      </div>

      <!-- People Manager (Shared) -->
      <div class="people-manager">
        <div class="section-header">
          <h3>People</h3>
          <button class="btn btn-secondary btn-sm" id="add-person-btn">+ Add Person</button>
        </div>
        <div class="people-list" id="people-list">
          <div class="person-row" data-person-id="0">
            <input type="text" class="person-name-input" value="Person 1" placeholder="Name" data-person-id="0">
            <button class="btn-remove-person" aria-label="Remove person" data-person-id="0">&times;</button>
          </div>
          <div class="person-row" data-person-id="1">
            <input type="text" class="person-name-input" value="Person 2" placeholder="Name" data-person-id="1">
            <button class="btn-remove-person" aria-label="Remove person" data-person-id="1">&times;</button>
          </div>
        </div>
      </div>

      <!-- Restaurant Bill Scenario -->
      <div class="scenario-panel active" id="scenario-restaurant" role="tabpanel">
        <div class="scenario-section">
          <div class="section-header">
            <h3>Line Items</h3>
            <button class="btn btn-secondary btn-sm" id="add-item-btn">+ Add Item</button>
          </div>
          <div class="items-list" id="items-list">
            <div class="item-row" data-item-id="0">
              <div class="item-details">
                <div class="item-name-wrapper">
                  <label class="item-label">Item</label>
                  <input type="text" class="item-name-input" placeholder="Item name" value="Shared appetizer" data-item-id="0">
                </div>
                <div class="qty-wrapper">
                  <label class="qty-label">Qty</label>
                  <input type="number" class="item-qty-input" min="1" step="1" value="1" inputmode="numeric" data-item-id="0">
                </div>
                <div class="price-wrapper">
                  <label class="price-label">Cost</label>
                  <input type="number" class="item-amount-input" min="0" step="0.01" placeholder="0.00" inputmode="decimal" data-item-id="0">
                </div>
                <button class="btn-remove-item" aria-label="Remove item" data-item-id="0">&times;</button>
              </div>
              <div class="item-participants" data-item-id="0">
                <span class="participants-label">Split between:</span>
                <div class="checkbox-group" id="item-participants-0"></div>
                <span class="item-error" id="item-error-0"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Tax/Tip Section -->
        <div class="scenario-section">
          <label class="toggle-row">
            <input type="checkbox" id="tax-tip-toggle">
            <span>Add tax &amp; tip</span>
          </label>
          <div class="tax-tip-section hidden" id="tax-tip-section">
            <div class="form-row">
              <div class="form-group">
                <label for="tax-tip-amount">Tax + Tip Amount</label>
                <input type="number" id="tax-tip-amount" min="0" step="0.01" placeholder="0.00" inputmode="decimal">
              </div>
              <div class="form-group">
                <label>Distribution</label>
                <div class="radio-group">
                  <label class="radio-label">
                    <input type="radio" name="tax-tip-method" value="proportional" checked>
                    <span>Proportional to subtotal</span>
                  </label>
                  <label class="radio-label">
                    <input type="radio" name="tax-tip-method" value="equal">
                    <span>Split equally</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Payer Section -->
        <div class="scenario-section">
          <div class="form-group">
            <label>Who paid the bill?</label>
            <p class="section-hint">Select all people who contributed to the payment.</p>
            <div class="payer-bubble-group" id="restaurant-payers"></div>
          </div>
        </div>

        <!-- Running Totals -->
        <div class="running-totals" id="restaurant-totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <strong id="restaurant-subtotal">$0.00</strong>
          </div>
          <div class="total-row" id="tax-tip-row" style="display: none;">
            <span>Tax + Tip:</span>
            <strong id="restaurant-taxtip">$0.00</strong>
          </div>
          <div class="total-row total-grand">
            <span>Grand Total:</span>
            <strong id="restaurant-grand-total">$0.00</strong>
          </div>
        </div>
      </div>

      <!-- Group Expense Scenario -->
      <div class="scenario-panel" id="scenario-group-expense" role="tabpanel">
        <div class="scenario-section">
          <div class="section-header">
            <h3>Expenses</h3>
            <button class="btn btn-secondary btn-sm" id="add-group-expense-item-btn">+ Add Expense</button>
          </div>
          <div class="items-list" id="group-expense-items-list">
            <div class="item-row" data-item-id="0">
              <div class="item-details">
                <div class="item-name-wrapper">
                  <label class="item-label">Item</label>
                  <input type="text" class="group-expense-item-name-input" placeholder="Expense name" value="" data-item-id="0">
                </div>
                <div class="qty-wrapper">
                  <label class="qty-label">Qty</label>
                  <input type="number" class="group-expense-item-qty-input" min="1" step="1" value="1" inputmode="numeric" data-item-id="0">
                </div>
                <div class="price-wrapper">
                  <label class="price-label">Cost</label>
                  <input type="number" class="group-expense-item-amount-input" min="0" step="0.01" placeholder="0.00" inputmode="decimal" data-item-id="0">
                </div>
                <button class="btn-remove-item" aria-label="Remove item" data-item-id="0">&times;</button>
              </div>
              <div class="item-participants" data-item-id="0">
                <span class="participants-label">Split between:</span>
                <div class="checkbox-group" id="group-expense-item-participants-0"></div>
                <span class="item-error" id="group-expense-item-error-0"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Payer Section -->
        <div class="scenario-section">
          <div class="form-group">
            <label>Who paid?</label>
            <p class="section-hint">Select all people who contributed to the payment.</p>
            <div class="payer-bubble-group" id="group-expense-payers"></div>
          </div>
        </div>

        <!-- Running Totals -->
        <div class="running-totals" id="group-expense-totals">
          <div class="total-row total-grand">
            <span>Grand Total:</span>
            <strong id="group-expense-grand-total">$0.00</strong>
          </div>
        </div>
      </div>

      <!-- Trip / Vacation Scenario -->
      <div class="scenario-panel" id="scenario-trip" role="tabpanel">
        <!-- Lodging Section -->
        <div class="scenario-section">
          <div class="section-header">
            <h3>Lodging</h3>
            <button class="btn btn-secondary btn-sm" id="add-lodging-item-btn">+ Add Lodging</button>
          </div>
          <p class="section-hint">Airbnbs, hotels, campsites, etc. Each lodging expense is split among selected participants.</p>
          <div class="items-list" id="lodging-items-list"></div>
        </div>

        <!-- Shared Costs Section -->
        <div class="scenario-section">
          <div class="section-header">
            <h3>Shared Expenses</h3>
            <button class="btn btn-secondary btn-sm" id="add-shared-item-btn">+ Add Expense</button>
          </div>
          <p class="section-hint">Gas, groceries, tickets, etc. Each expense is split among selected participants.</p>
          <div class="items-list" id="shared-items-list"></div>
        </div>

        <!-- Running Totals -->
        <div class="running-totals" id="trip-totals">
          <div class="total-row">
            <span>Lodging Total:</span>
            <strong id="trip-lodging-total">$0.00</strong>
          </div>
          <div class="total-row">
            <span>Shared Expenses:</span>
            <strong id="trip-shared-total">$0.00</strong>
          </div>
          <div class="total-row total-grand">
            <span>Grand Total:</span>
            <strong id="trip-grand-total">$0.00</strong>
          </div>
        </div>
      </div>

      <!-- Calculate & Reset Buttons -->
      <div class="calculator-actions">
        <button class="btn btn-primary" id="calculate-fair-split">Calculate Settlement</button>
        <button class="btn btn-outline" id="reset-fair-split">Reset</button>
      </div>

      <!-- Results (Shared) -->
      <div class="group-results" id="fair-split-results" aria-live="polite">
        <div class="summary-section">
          <h3>Summary</h3>
          <table class="summary-table" id="fair-split-summary">
            <thead>
              <tr>
                <th>Person</th>
                <th>Owed</th>
                <th>Paid</th>
                <th>Net</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="settlement-section">
          <h3>Settlement Plan</h3>
          <ul class="settlement-list" id="fair-split-settlements"></ul>
        </div>
      </div>
    </div>

    <div class="embed-footer">
      Powered by <a href="https://splitbillsfairly.com" target="_blank" rel="noopener">SplitBillsFairly.com</a>
    </div>
  </div>

  <script src="../assets/js/app.js"></script>
</body>
</html>
